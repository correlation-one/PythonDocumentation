
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>gamelib.tests &#8212; C1 Terminal Python Starterkit 1.0 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for gamelib.tests</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">.game_state</span> <span class="k">import</span> <span class="n">GameState</span>
<span class="kn">from</span> <span class="nn">.unit</span> <span class="k">import</span> <span class="n">GameUnit</span>
<span class="kn">from</span> <span class="nn">.advanced_game_state</span> <span class="k">import</span> <span class="n">AdvancedGameState</span>

<div class="viewcode-block" id="BasicTests"><a class="viewcode-back" href="../../gamelib.html#gamelib.tests.BasicTests">[docs]</a><span class="k">class</span> <span class="nc">BasicTests</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

<div class="viewcode-block" id="BasicTests.make_turn_0_map"><a class="viewcode-back" href="../../gamelib.html#gamelib.tests.BasicTests.make_turn_0_map">[docs]</a>    <span class="k">def</span> <span class="nf">make_turn_0_map</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">adv</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">config</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        {</span>
<span class="s2">            &quot;debug&quot;:{</span>
<span class="s2">                &quot;printMapString&quot;:false,</span>
<span class="s2">                &quot;printTStrings&quot;:false,</span>
<span class="s2">                &quot;printActStrings&quot;:false,</span>
<span class="s2">                &quot;printHitStrings&quot;:false,</span>
<span class="s2">                &quot;printPlayerInputStrings&quot;:false,</span>
<span class="s2">                &quot;printBotErrors&quot;:false,</span>
<span class="s2">                &quot;printPlayerGetHitStrings&quot;:false</span>
<span class="s2">            },</span>
<span class="s2">            &quot;unitInformation&quot;:[</span>
<span class="s2">                {</span>
<span class="s2">                &quot;damage&quot;:0.0,</span>
<span class="s2">                &quot;cost&quot;:1,</span>
<span class="s2">                &quot;getHitRadius&quot;:0.51,</span>
<span class="s2">                &quot;display&quot;:&quot;Filter&quot;,</span>
<span class="s2">                &quot;range&quot;:3.0,</span>
<span class="s2">                &quot;shorthand&quot;:&quot;FF&quot;,</span>
<span class="s2">                &quot;stability&quot;:60.0</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                &quot;damage&quot;:0.0,</span>
<span class="s2">                &quot;cost&quot;:4,</span>
<span class="s2">                &quot;getHitRadius&quot;:0.51,</span>
<span class="s2">                &quot;shieldAmount&quot;:10.0,</span>
<span class="s2">                &quot;display&quot;:&quot;Encryptor&quot;,</span>
<span class="s2">                &quot;range&quot;:3.0,</span>
<span class="s2">                &quot;shorthand&quot;:&quot;EF&quot;,</span>
<span class="s2">                &quot;stability&quot;:30.0</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                &quot;damage&quot;:4.0,</span>
<span class="s2">                &quot;cost&quot;:3,</span>
<span class="s2">                &quot;getHitRadius&quot;:0.51,</span>
<span class="s2">                &quot;display&quot;:&quot;Destructor&quot;,</span>
<span class="s2">                &quot;range&quot;:3.0,</span>
<span class="s2">                &quot;shorthand&quot;:&quot;DF&quot;,</span>
<span class="s2">                &quot;stability&quot;:75.0</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                &quot;damageI&quot;:1.0,</span>
<span class="s2">                &quot;damageToPlayer&quot;:1.0,</span>
<span class="s2">                &quot;cost&quot;:1.0,</span>
<span class="s2">                &quot;getHitRadius&quot;:0.51,</span>
<span class="s2">                &quot;damageF&quot;:1.0,</span>
<span class="s2">                &quot;display&quot;:&quot;Ping&quot;,</span>
<span class="s2">                &quot;range&quot;:3.0,</span>
<span class="s2">                &quot;shorthand&quot;:&quot;PI&quot;,</span>
<span class="s2">                &quot;stability&quot;:15.0,</span>
<span class="s2">                &quot;speed&quot;:0.5</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                &quot;damageI&quot;:3.0,</span>
<span class="s2">                &quot;damageToPlayer&quot;:1.0,</span>
<span class="s2">                &quot;cost&quot;:3.0,</span>
<span class="s2">                &quot;getHitRadius&quot;:0.51,</span>
<span class="s2">                &quot;damageF&quot;:3.0,</span>
<span class="s2">                &quot;display&quot;:&quot;EMP&quot;,</span>
<span class="s2">                &quot;range&quot;:5.0,</span>
<span class="s2">                &quot;shorthand&quot;:&quot;EI&quot;,</span>
<span class="s2">                &quot;stability&quot;:5.0,</span>
<span class="s2">                &quot;speed&quot;:0.25</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                &quot;damageI&quot;:10.0,</span>
<span class="s2">                &quot;damageToPlayer&quot;:1.0,</span>
<span class="s2">                &quot;cost&quot;:1.0,</span>
<span class="s2">                &quot;getHitRadius&quot;:0.51,</span>
<span class="s2">                &quot;damageF&quot;:0.0,</span>
<span class="s2">                &quot;display&quot;:&quot;Scrambler&quot;,</span>
<span class="s2">                &quot;range&quot;:3.0,</span>
<span class="s2">                &quot;shorthand&quot;:&quot;SI&quot;,</span>
<span class="s2">                &quot;stability&quot;:40.0,</span>
<span class="s2">                &quot;speed&quot;:0.25</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                &quot;display&quot;:&quot;Remove&quot;,</span>
<span class="s2">                &quot;shorthand&quot;:&quot;RM&quot;</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;timingAndReplay&quot;:{</span>
<span class="s2">                &quot;waitTimeBotMax&quot;:100000,</span>
<span class="s2">                &quot;waitTimeManual&quot;:1820000,</span>
<span class="s2">                &quot;waitForever&quot;:false,</span>
<span class="s2">                &quot;waitTimeBotSoft&quot;:70000,</span>
<span class="s2">                &quot;replaySave&quot;:0,</span>
<span class="s2">                &quot;storeBotTimes&quot;:true</span>
<span class="s2">            },</span>
<span class="s2">            &quot;resources&quot;:{</span>
<span class="s2">                &quot;turnIntervalForBitCapSchedule&quot;:10,</span>
<span class="s2">                &quot;turnIntervalForBitSchedule&quot;:10,</span>
<span class="s2">                &quot;bitRampBitCapGrowthRate&quot;:5.0,</span>
<span class="s2">                &quot;roundStartBitRamp&quot;:10,</span>
<span class="s2">                &quot;bitGrowthRate&quot;:1.0,</span>
<span class="s2">                &quot;startingHP&quot;:30.0,</span>
<span class="s2">                &quot;maxBits&quot;:999999.0,</span>
<span class="s2">                &quot;bitsPerRound&quot;:5.0,</span>
<span class="s2">                &quot;coresPerRound&quot;:5.0,</span>
<span class="s2">                &quot;coresForPlayerDamage&quot;:1.0,</span>
<span class="s2">                &quot;startingBits&quot;:5.0,</span>
<span class="s2">                &quot;bitDecayPerRound&quot;:0.33333,</span>
<span class="s2">                &quot;startingCores&quot;:25.0</span>
<span class="s2">            },</span>
<span class="s2">            &quot;mechanics&quot;:{</span>
<span class="s2">                &quot;basePlayerHealthDamage&quot;:1.0,</span>
<span class="s2">                &quot;damageGrowthBasedOnY&quot;:0.0,</span>
<span class="s2">                &quot;bitsCanStackOnDeployment&quot;:true,</span>
<span class="s2">                &quot;destroyOwnUnitRefund&quot;:0.5,</span>
<span class="s2">                &quot;destroyOwnUnitsEnabled&quot;:true,</span>
<span class="s2">                &quot;stepsRequiredSelfDestruct&quot;:5,</span>
<span class="s2">                &quot;selfDestructRadius&quot;:1.5,</span>
<span class="s2">                &quot;shieldDecayPerFrame&quot;:0.15,</span>
<span class="s2">                &quot;meleeMultiplier&quot;:0,</span>
<span class="s2">                &quot;destroyOwnUnitDelay&quot;:1,</span>
<span class="s2">                &quot;rerouteMidRound&quot;:true,</span>
<span class="s2">                &quot;firewallBuildTime&quot;:0</span>
<span class="s2">            }</span>
<span class="s2">        }</span>
<span class="s2">        &quot;&quot;&quot;</span>
        <span class="n">turn_0</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;{&quot;p2Units&quot;:[[],[],[],[],[],[],[]],&quot;turnInfo&quot;:[0,0,-1],&quot;p1Stats&quot;:[30.0,25.0,5.0,0],&quot;p1Units&quot;:[[],[],[],[],[],[],[]],&quot;p2Stats&quot;:[30.0,25.0,5.0,0],&quot;events&quot;:{&quot;selfDestruct&quot;:[],&quot;breach&quot;:[],&quot;damage&quot;:[],&quot;shield&quot;:[],&quot;move&quot;:[],&quot;spawn&quot;:[],&quot;death&quot;:[],&quot;attack&quot;:[],&quot;melee&quot;:[]}}&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">adv</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">AdvancedGameState</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">config</span><span class="p">),</span> <span class="n">turn_0</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">GameState</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">config</span><span class="p">),</span> <span class="n">turn_0</span><span class="p">)</span></div>

<div class="viewcode-block" id="BasicTests.test_basic"><a class="viewcode-back" href="../../gamelib.html#gamelib.tests.BasicTests.test_basic">[docs]</a>    <span class="k">def</span> <span class="nf">test_basic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">adv</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;It&#39;s the end of the world as we know it, and I feel fine&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="BasicTests.test_advanced_game_state"><a class="viewcode-back" href="../../gamelib.html#gamelib.tests.BasicTests.test_advanced_game_state">[docs]</a>    <span class="k">def</span> <span class="nf">test_advanced_game_state</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">adv</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">advanced</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_turn_0_map</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">advanced</span><span class="p">,</span> <span class="n">GameState</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">advanced</span><span class="p">,</span> <span class="n">AdvancedGameState</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">dir</span><span class="p">(</span><span class="bp">self</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;test&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;advanced&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">name</span><span class="p">:</span>
                <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)(</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="BasicTests.test_simple_fields"><a class="viewcode-back" href="../../gamelib.html#gamelib.tests.BasicTests.test_simple_fields">[docs]</a>    <span class="k">def</span> <span class="nf">test_simple_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">adv</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">game</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_turn_0_map</span><span class="p">(</span><span class="n">adv</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">game</span><span class="o">.</span><span class="n">get_resource</span><span class="p">(</span><span class="n">game</span><span class="o">.</span><span class="n">BITS</span><span class="p">),</span> <span class="s2">&quot;I should have 5 bits&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="n">game</span><span class="o">.</span><span class="n">get_resource</span><span class="p">(</span><span class="n">game</span><span class="o">.</span><span class="n">CORES</span><span class="p">),</span> <span class="s2">&quot;I should have 25 cores&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">game</span><span class="o">.</span><span class="n">get_resource</span><span class="p">(</span><span class="n">game</span><span class="o">.</span><span class="n">BITS</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s2">&quot;My opponent should have 5 bits&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="n">game</span><span class="o">.</span><span class="n">get_resource</span><span class="p">(</span><span class="n">game</span><span class="o">.</span><span class="n">CORES</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s2">&quot;My opponent should have 25 cores&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">game</span><span class="o">.</span><span class="n">turn_number</span><span class="p">,</span> <span class="s2">&quot;The map does not have a turn_number, or we can&#39;t read it&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="n">game</span><span class="o">.</span><span class="n">my_health</span><span class="p">,</span> <span class="s2">&quot;My integrity is not working&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="n">game</span><span class="o">.</span><span class="n">enemy_health</span><span class="p">,</span> <span class="s2">&quot;My opponent has no integrity!&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="BasicTests.test_spawning"><a class="viewcode-back" href="../../gamelib.html#gamelib.tests.BasicTests.test_spawning">[docs]</a>    <span class="k">def</span> <span class="nf">test_spawning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">adv</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">game</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_turn_0_map</span><span class="p">(</span><span class="n">adv</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">game</span><span class="o">.</span><span class="n">attempt_spawn</span><span class="p">(</span><span class="s2">&quot;SI&quot;</span><span class="p">,</span> <span class="p">[[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]),</span> <span class="s2">&quot;We cannot spawn a soldier!&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">game</span><span class="o">.</span><span class="n">attempt_spawn</span><span class="p">(</span><span class="s2">&quot;SI&quot;</span><span class="p">,</span> <span class="p">[[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">13</span><span class="p">]]),</span> <span class="s2">&quot;We can spawn a soldier in the middle of the map?!?!&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">game</span><span class="o">.</span><span class="n">can_spawn</span><span class="p">(</span><span class="s2">&quot;FF&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">14</span><span class="p">,</span> <span class="mi">14</span><span class="p">]),</span> <span class="s2">&quot;Apparently I can place towers on my opponent&#39;s side&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">game</span><span class="o">.</span><span class="n">attempt_spawn</span><span class="p">(</span><span class="s2">&quot;DF&quot;</span><span class="p">,</span> <span class="p">[[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">6</span><span class="p">]]),</span> <span class="s2">&quot;We cannot spawn a tower!&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">game</span><span class="o">.</span><span class="n">attempt_spawn</span><span class="p">(</span><span class="s2">&quot;SI&quot;</span><span class="p">,</span> <span class="p">[[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">5</span><span class="p">]]),</span> <span class="s2">&quot;More or less than 2 units were spawned!&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([(</span><span class="s2">&quot;DF&quot;</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">6</span><span class="p">)],</span> <span class="n">game</span><span class="o">.</span><span class="n">_build_stack</span><span class="p">,</span> <span class="s2">&quot;Build queue is wrong!&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([(</span><span class="s2">&quot;SI&quot;</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;SI&quot;</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;SI&quot;</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">0</span><span class="p">)],</span> <span class="n">game</span><span class="o">.</span><span class="n">_deploy_stack</span><span class="p">,</span> <span class="s2">&quot;Deploy queue is wrong!&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="BasicTests.test_trivial_functions"><a class="viewcode-back" href="../../gamelib.html#gamelib.tests.BasicTests.test_trivial_functions">[docs]</a>    <span class="k">def</span> <span class="nf">test_trivial_functions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">adv</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">game</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_turn_0_map</span><span class="p">(</span><span class="n">adv</span><span class="p">)</span>

        <span class="c1">#Distance Between locations</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">game</span><span class="o">.</span><span class="n">game_map</span><span class="o">.</span><span class="n">distance_between_locations</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span> <span class="s2">&quot;The distance between 0,0 and 0,-1 should be 1&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">game</span><span class="o">.</span><span class="n">game_map</span><span class="o">.</span><span class="n">distance_between_locations</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span> <span class="s2">&quot;The distance between -1,-1 and -2,-1 should be 1&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">game</span><span class="o">.</span><span class="n">game_map</span><span class="o">.</span><span class="n">distance_between_locations</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="s2">&quot;The distance between 0,0 and 16,9 should be 5&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">game</span><span class="o">.</span><span class="n">game_map</span><span class="o">.</span><span class="n">get_locations_in_range</span><span class="p">([</span><span class="o">-</span><span class="mi">500</span><span class="p">,</span><span class="o">-</span><span class="mi">500</span><span class="p">],</span> <span class="mi">10</span><span class="p">)),</span> <span class="s2">&quot;Invalid tiles are being marked as in range&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">game</span><span class="o">.</span><span class="n">game_map</span><span class="o">.</span><span class="n">get_locations_in_range</span><span class="p">([</span><span class="mi">13</span><span class="p">,</span><span class="mi">13</span><span class="p">],</span> <span class="mi">0</span><span class="p">)),</span> <span class="s2">&quot;A location should be in range of itself&quot;</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="BasicTests.test_get_units"><a class="viewcode-back" href="../../gamelib.html#gamelib.tests.BasicTests.test_get_units">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_units</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">adv</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">game</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_turn_0_map</span><span class="p">(</span><span class="n">adv</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">game</span><span class="o">.</span><span class="n">game_map</span><span class="p">[</span><span class="mi">13</span><span class="p">,</span><span class="mi">13</span><span class="p">]),</span> <span class="s2">&quot;There should not be a unit on this location&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
            <span class="n">game</span><span class="o">.</span><span class="n">game_map</span><span class="o">.</span><span class="n">add_unit</span><span class="p">(</span><span class="s2">&quot;EI&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">13</span><span class="p">,</span><span class="mi">13</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">game</span><span class="o">.</span><span class="n">game_map</span><span class="p">[</span><span class="mi">13</span><span class="p">,</span><span class="mi">13</span><span class="p">]),</span> <span class="s2">&quot;Information seems not to be stacking&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
            <span class="n">game</span><span class="o">.</span><span class="n">game_map</span><span class="o">.</span><span class="n">add_unit</span><span class="p">(</span><span class="s2">&quot;FF&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">13</span><span class="p">,</span><span class="mi">13</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">game</span><span class="o">.</span><span class="n">game_map</span><span class="p">[</span><span class="mi">13</span><span class="p">,</span><span class="mi">13</span><span class="p">]),</span> <span class="s2">&quot;Towers seem to be stacking&quot;</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="BasicTests.test_get_units_in_range"><a class="viewcode-back" href="../../gamelib.html#gamelib.tests.BasicTests.test_get_units_in_range">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_units_in_range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">adv</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">game</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_turn_0_map</span><span class="p">(</span><span class="n">adv</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">game</span><span class="o">.</span><span class="n">game_map</span><span class="o">.</span><span class="n">get_locations_in_range</span><span class="p">([</span><span class="mi">13</span><span class="p">,</span><span class="mi">13</span><span class="p">],</span> <span class="mi">0</span><span class="p">)),</span> <span class="s2">&quot;We should be in 0 range of ourself&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">37</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">game</span><span class="o">.</span><span class="n">game_map</span><span class="o">.</span><span class="n">get_locations_in_range</span><span class="p">([</span><span class="mi">13</span><span class="p">,</span><span class="mi">13</span><span class="p">],</span> <span class="mi">3</span><span class="p">)),</span> <span class="s2">&quot;Wrong number of tiles in range&quot;</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_test_get_attackers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">game</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_turn_0_map</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([],</span> <span class="n">game</span><span class="o">.</span><span class="n">get_attackers</span><span class="p">([</span><span class="mi">13</span><span class="p">,</span><span class="mi">13</span><span class="p">],</span> <span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;Are we being attacked by a ghost?&quot;</span><span class="p">)</span>
        <span class="n">game</span><span class="o">.</span><span class="n">game_map</span><span class="o">.</span><span class="n">add_unit</span><span class="p">(</span><span class="s2">&quot;DF&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span><span class="mi">12</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([],</span> <span class="n">game</span><span class="o">.</span><span class="n">get_attackers</span><span class="p">([</span><span class="mi">13</span><span class="p">,</span><span class="mi">13</span><span class="p">],</span> <span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;Are we being attacked by a friend?&quot;</span><span class="p">)</span>
        <span class="n">game</span><span class="o">.</span><span class="n">game_map</span><span class="o">.</span><span class="n">add_unit</span><span class="p">(</span><span class="s2">&quot;EF&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">13</span><span class="p">,</span><span class="mi">12</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([],</span> <span class="n">game</span><span class="o">.</span><span class="n">get_attackers</span><span class="p">([</span><span class="mi">13</span><span class="p">,</span><span class="mi">13</span><span class="p">],</span> <span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;Are we being attacked by an encryptor?&quot;</span><span class="p">)</span>
        <span class="n">game</span><span class="o">.</span><span class="n">game_map</span><span class="o">.</span><span class="n">add_unit</span><span class="p">(</span><span class="s2">&quot;FF&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">14</span><span class="p">,</span><span class="mi">12</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([],</span> <span class="n">game</span><span class="o">.</span><span class="n">get_attackers</span><span class="p">([</span><span class="mi">13</span><span class="p">,</span><span class="mi">13</span><span class="p">],</span> <span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;Are we being attacked by a filter?&quot;</span><span class="p">)</span>
        <span class="n">game</span><span class="o">.</span><span class="n">game_map</span><span class="o">.</span><span class="n">add_unit</span><span class="p">(</span><span class="s2">&quot;DF&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span><span class="mi">14</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">game</span><span class="o">.</span><span class="n">get_attackers</span><span class="p">([</span><span class="mi">13</span><span class="p">,</span><span class="mi">13</span><span class="p">],</span> <span class="mi">0</span><span class="p">)),</span> <span class="s2">&quot;We should be in danger&quot;</span><span class="p">)</span>
        <span class="n">game</span><span class="o">.</span><span class="n">game_map</span><span class="o">.</span><span class="n">add_unit</span><span class="p">(</span><span class="s2">&quot;DF&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">13</span><span class="p">,</span><span class="mi">14</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">game</span><span class="o">.</span><span class="n">game_map</span><span class="o">.</span><span class="n">add_unit</span><span class="p">(</span><span class="s2">&quot;DF&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">14</span><span class="p">,</span><span class="mi">14</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">game</span><span class="o">.</span><span class="n">get_attackers</span><span class="p">([</span><span class="mi">13</span><span class="p">,</span><span class="mi">13</span><span class="p">],</span> <span class="mi">0</span><span class="p">)),</span> <span class="s2">&quot;We should be in danger from 3 places&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="BasicTests.test_print_unit"><a class="viewcode-back" href="../../gamelib.html#gamelib.tests.BasicTests.test_print_unit">[docs]</a>    <span class="k">def</span> <span class="nf">test_print_unit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">adv</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">game</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_turn_0_map</span><span class="p">(</span><span class="n">adv</span><span class="p">)</span>

        <span class="n">game</span><span class="o">.</span><span class="n">game_map</span><span class="o">.</span><span class="n">add_unit</span><span class="p">(</span><span class="s2">&quot;FF&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">14</span><span class="p">,</span><span class="mi">13</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">got_string</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">game</span><span class="o">.</span><span class="n">game_map</span><span class="p">[</span><span class="mi">14</span><span class="p">,</span><span class="mi">13</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">expected_string</span> <span class="o">=</span> <span class="s2">&quot;Enemy FF, stability: 60.0 location: [14, 13] &quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">got_string</span><span class="p">,</span> <span class="n">expected_string</span><span class="p">,</span> <span class="s2">&quot;Expected </span><span class="si">{}</span><span class="s2"> from print_unit test got </span><span class="si">{}</span><span class="s2"> &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">expected_string</span><span class="p">,</span> <span class="n">got_string</span><span class="p">))</span></div>

<div class="viewcode-block" id="BasicTests.test_future_bits"><a class="viewcode-back" href="../../gamelib.html#gamelib.tests.BasicTests.test_future_bits">[docs]</a>    <span class="k">def</span> <span class="nf">test_future_bits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">adv</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">game</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_turn_0_map</span><span class="p">(</span><span class="n">adv</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">future_turn_testing_function</span><span class="p">(</span><span class="n">game</span><span class="p">,</span> <span class="mf">8.3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">future_turn_testing_function</span><span class="p">(</span><span class="n">game</span><span class="p">,</span> <span class="mf">10.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">future_turn_testing_function</span><span class="p">(</span><span class="n">game</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">future_turn_testing_function</span><span class="p">(</span><span class="n">game</span><span class="p">,</span> <span class="mf">13.0</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">future_turn_testing_function</span><span class="p">(</span><span class="n">game</span><span class="p">,</span> <span class="mf">13.7</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">future_turn_testing_function</span><span class="p">(</span><span class="n">game</span><span class="p">,</span> <span class="mf">14.1</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">future_turn_testing_function</span><span class="p">(</span><span class="n">game</span><span class="p">,</span> <span class="mf">14.4</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">future_turn_testing_function</span><span class="p">(</span><span class="n">game</span><span class="p">,</span> <span class="mf">14.6</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">future_turn_testing_function</span><span class="p">(</span><span class="n">game</span><span class="p">,</span> <span class="mf">14.7</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">future_turn_testing_function</span><span class="p">(</span><span class="n">game</span><span class="p">,</span> <span class="mf">15.8</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">future_turn_testing_function</span><span class="p">(</span><span class="n">game</span><span class="p">,</span> <span class="mf">16.5</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">future_turn_testing_function</span><span class="p">(</span><span class="n">game</span><span class="p">,</span> <span class="mf">17.0</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">future_turn_testing_function</span><span class="p">(</span><span class="n">game</span><span class="p">,</span> <span class="mf">17.3</span><span class="p">,</span> <span class="mi">13</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">future_turn_testing_function</span><span class="p">(</span><span class="n">game</span><span class="p">,</span> <span class="mf">17.5</span><span class="p">,</span> <span class="mi">14</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">future_turn_testing_function</span><span class="p">(</span><span class="n">game</span><span class="p">,</span> <span class="mf">17.7</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">future_turn_testing_function</span><span class="p">(</span><span class="n">game</span><span class="p">,</span> <span class="mf">17.8</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">future_turn_testing_function</span><span class="p">(</span><span class="n">game</span><span class="p">,</span> <span class="mf">17.9</span><span class="p">,</span> <span class="mi">17</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">future_turn_testing_function</span><span class="p">(</span><span class="n">game</span><span class="p">,</span> <span class="mf">17.9</span><span class="p">,</span> <span class="mi">18</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">future_turn_testing_function</span><span class="p">(</span><span class="n">game</span><span class="p">,</span> <span class="mf">17.9</span><span class="p">,</span> <span class="mi">19</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">future_turn_testing_function</span><span class="p">(</span><span class="n">game</span><span class="p">,</span> <span class="mf">18.9</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span></div>

<div class="viewcode-block" id="BasicTests.future_turn_testing_function"><a class="viewcode-back" href="../../gamelib.html#gamelib.tests.BasicTests.future_turn_testing_function">[docs]</a>    <span class="k">def</span> <span class="nf">future_turn_testing_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game</span><span class="p">,</span> <span class="n">expected</span><span class="p">,</span> <span class="n">turns</span><span class="p">):</span>
        <span class="n">actual</span> <span class="o">=</span> <span class="n">game</span><span class="o">.</span><span class="n">project_future_bits</span><span class="p">(</span><span class="n">turns</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">actual</span><span class="p">,</span> <span class="n">expected</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Expected </span><span class="si">{}</span><span class="s2"> power </span><span class="si">{}</span><span class="s2"> turns from now, got </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">turns</span><span class="p">,</span> <span class="n">actual</span><span class="p">))</span></div></div>

</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">C1 Terminal Python Starterkit</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../gamelib.html">gamelib package</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Correlation One.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.11</a>
      
    </div>

    

    
  </body>
</html>